asyncapi: 2.2.0
info:
  title: Trivia Del Genio AsyncAPI
  version: 1.0.0
  description: Trivia Room AsyncAPI

servers:
  test:
    url: wss://api.trivia.dataandgame.com
    protocol: Colyseus(wss)

channels:
  tag:
    description: Trivia del Genio AsyncAPI
  #trivia
  #publish
  trivia/createTrivia:
    publish:
      message:
        $ref: '#/components/messages/createTriviaDto'
  trivia/joinTrivia:
    publish:
      message:
        $ref: '#/components/messages/joinTriviaDto'
  trivia/startTrivia:
    publish:
      message:
        $ref: '#/components/messages/startTriviaDto'
  trivia/voteTriviaCategory:
    publish:
      message:
        $ref: '#/components/messages/voteTriviaCategoryDto'
  trivia/finishFirstTriviaRound:
    publish:
      message:
        $ref: '#/components/messages/finishFirstTriviaRoundDto'
  trivia/finishSecondTriviaRound:
    publish:
      message:
        $ref: '#/components/messages/finishSecondTriviaRoundDto'
  trivia/finishThirdTriviaRound:
    publish:
      message:
        $ref: '#/components/messages/finishThirdTriviaRoundDto'
  trivia/claimTriviaPowerup:
    publish:
      message:
        $ref: '#/components/messages/claimTriviaPowerupDto'
  #subscribe
  trivia/triviaUserJoined:
    subscribe:
      message:
        $ref: '#/components/messages/triviaUserJoinedDto'
  trivia/triviaUserDisconnected:
    subscribe:
      message:
        $ref: '#/components/messages/triviaUserDisconnectedDto'
  trivia/triviaCategoriesRandomized:
    subscribe:
      message:
        $ref: '#/components/messages/triviaCategoriesRandomizedDto'
  trivia/triviaStarted:
    subscribe:
      message:
        $ref: '#/components/messages/triviaStartedDto'
  trivia/triviaCategorySelected:
    subscribe:
      message:
        $ref: '#/components/messages/triviaCategorySelectedDto'
  trivia/triviaUserFinishedFirstRound:
    subscribe:
      message:
        $ref: '#/components/messages/triviaUserFinishedFirstRoundDto'
  trivia/triviaUserFinishedSecondRound:
    subscribe:
      message:
        $ref: '#/components/messages/triviaUserFinishedSecondRoundDto'
  trivia/triviaUserFinishedThirdRound:
    subscribe:
      message:
        $ref: '#/components/messages/triviaUserFinishedThirdRoundDto'
  trivia/triviaConnectedUsersNumberUpdated:
    subscribe:
      message:
        $ref: '#/components/messages/triviaConnectedUsersNumberUpdatedDto'
  trivia/triviaUserClaimedPowerup:
    subscribe:
      message:
        $ref: '#/components/messages/triviaUserClaimedPowerupDto'
        
components:
  messages:
    #trivia
    #publish
    createTriviaDto:
      payload:
        type: object
        properties:
          enterprise:
            type: string
          trivia:
            type: object
            properties:
              id:
                type: string
              numberLimitUsers:
                type: number
          user:
            type: object
            properties:
              id:
                type: string
              Authorization:
                type: string
    joinTriviaDto:
      payload:
        type: object
        properties:
          enterprise:
            type: string
          user:
            type: object
            properties:
              id:
                type: string
              Authorization:
                type: string
    startTriviaDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
              Authorization:
                type: string
    voteTriviaCategoryDto:
      payload:
        type: object
        properties:
          category:
            type: string
          user:
            type: object
            properties:
              id:
                type: string
    finishFirstTriviaRoundDto:
      payload:
        type: object
        properties:
          result:
            type: number
          user:
            type: object
            properties:
              id:
                type: string
    finishSecondTriviaRoundDto:
      payload:
        type: object
        properties:
          result:
            type: number
    finishThirdTriviaRoundDto:
      payload:
        type: object
        properties:
          result:
            type: number
    claimTriviaPowerupDto:
      payload:
        type: object
        properties:
          powerup:
            type: number
    #suscribe
    triviaUserJoinedDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
              enterprise:
                type: string
    triviaUserDisconnectedDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
    triviaCategoriesRandomizedDto:
      payload:
        type: object
        properties:
          categories:
            type: array
            items:
              type: 
                string
    triviaStartedDto:
      payload:
        type: object
        properties:
          trivia:
            type: object
            properties:
              status:
                type: string
    triviaCategorySelectedDto:
      payload:
        type: object
        properties:
          trivia:
            type: object
            properties:
              category:
                type: string
    triviaUserFinishedFirstRoundDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
              result:
                type: number
    triviaUserFinishedSecondRoundDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
              result:
                type: number
    triviaUserFinishedThirdRoundDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
              result:
                type: number
    triviaConnectedUsersNumberUpdatedDto:
      payload:
        type: object
        properties:
          trivia:
            type: object
            properties:
              connectedUsersNumber:
                type: number
    triviaUserClaimedPowerupDto:
      payload:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: string
              powerup:
                type: number
